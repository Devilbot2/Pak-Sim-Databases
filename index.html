<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PAK SIM DATABASE BY R2H</title>

<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XXXXXXXXXX'); // <-- Replace with your GA4 ID
</script>

<style>
/* ---- Existing CSS ---- */
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%); color: #fff; min-height: 100vh; overflow-x: hidden; }
/* (rest of your CSS remains exactly the same) */
</style>
</head>
<body>
<div class="container">
    <header class="header">
        <div class="logo">
            <div class="logo-icon">‚ô¶</div>
            <div class="logo-text">PAK SIM DB</div>
        </div>
        <div class="status">
            <div class="status-dot"></div>
            <span>SYSTEM ONLINE</span>
        </div>
    </header>

    <main class="main-content">
        <h1 class="title">PAK SIM DATABASE BY R2H</h1>
        <p class="subtitle">ADVANCED INFORMATION LOOKUP SYSTEM</p>
        <p class="description">SECURE AND RELIABLE PAKISTAN SIM CARD INFORMATION RETRIEVAL SYSTEM</p>

        <div class="search-section">
            <div class="search-title">
                <div class="search-icon">üîç</div>
                <span>DATABASE QUERY</span>
            </div>

            <div class="input-group">
                <label class="input-label">MOBILE NUMBER</label>
                <div class="phone-input-container">
                    <input type="text" class="country-code" value="+92" readonly>
                    <input type="tel" class="phone-input" id="phoneNumber" placeholder="3012345678" maxlength="10">
                </div>
            </div>

            <button class="search-button" id="searchButton">
                <div class="loading" id="loading"></div>
                <span id="buttonText">SEARCH DATABASE</span>
            </button>
        </div>

        <div class="result-section" id="resultSection">
            <div class="result-grid">
                <div class="result-box">
                    <div class="result-box-title">NAME</div>
                    <div class="result-box-data" id="resultName">-</div>
                </div>
                <div class="result-box">
                    <div class="result-box-title">CNIC Number</div>
                    <div class="result-box-data" id="resultCnic">-</div>
                </div>
                <div class="result-box" style="grid-column: 1 / -1;">
                    <div class="result-box-title">ADDRESS</div>
                    <div class="result-box-data" id="resultAddress">-</div>
                </div>
                <div class="result-box" style="grid-column: 1 / -1;">
                    <div class="result-box-title">ALL NUMBERS</div>
                    <div class="result-box-data" id="resultNumbers">-</div>
                </div>
            </div>
        </div>

        <div class="error-section" id="errorSection">
            <div class="error-title">Error</div>
            <div class="result-data" id="errorData"></div>
            <a href="https://wa.me/923336181194" target="_blank" class="whatsapp-contact" id="whatsappButton">
                <div class="whatsapp-icon">üì±</div>
                <span>CONTACT ON WHATSAPP</span>
            </a>
        </div>

    </main>

    <footer class="footer">
        <p class="footer-text">DEVELOP BY R2H Team</p>
        <a href="https://whatsapp.com/channel/0029VbAy8sq4Spk82e61hS0F" target="_blank">
            <div class="whatsapp-icon">üì±</div>
            <span>FOLLOW ON WHATSAPP</span>
        </a>
    </footer>
</div>

<script>
// ===== Existing JS for search functionality =====
const phoneInput = document.getElementById('phoneNumber');
const searchButton = document.getElementById('searchButton');
const loading = document.getElementById('loading');
const buttonText = document.getElementById('buttonText');
const resultSection = document.getElementById('resultSection');
const errorSection = document.getElementById('errorSection');
const errorData = document.getElementById('errorData');
const whatsappButton = document.getElementById('whatsappButton');

const resultName = document.getElementById('resultName');
const resultCnic = document.getElementById('resultCnic');
const resultAddress = document.getElementById('resultAddress');
const resultNumbers = document.getElementById('resultNumbers');

phoneInput.addEventListener('input', function(e){
    let value = e.target.value.replace(/\D/g, '');
    if(value.length > 10) value = value.substring(0,10);
    e.target.value = value;
});
phoneInput.addEventListener('keypress', function(e){
    if(e.key==='Enter') searchDatabase();
});
searchButton.addEventListener('click', searchDatabase);

async function searchDatabase(){
    const phoneNumber = phoneInput.value.trim();
    if(!phoneNumber || phoneNumber.length!==10){
        showError('Please enter a valid 10-digit phone number');
        return;
    }

    setLoading(true);
    hideResults();

    try{
        const fullNumber = '0'+phoneNumber;
        const apiUrl = `https://simownership.pro/search.php?type=mobile&search=${fullNumber}`;
        const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(apiUrl)}`;
        const response = await fetch(proxyUrl);
        if(!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

        const data = await response.json();
        const resultContent = data.contents;

        const parser = new DOMParser();
        const doc = parser.parseFromString(resultContent,"text/html");
        const row = doc.querySelector("tbody tr");

        if(row){
            const cols = row.querySelectorAll("td");
            const jsonData = {
                name: cols[1]?.textContent.trim() || 'N/A',
                cnic: cols[2]?.textContent.trim() || 'N/A',
                address: cols[3]?.textContent.trim() || 'N/A',
                numbers: cols[0]?.textContent.trim() || 'N/A'
            };
            displayResult(jsonData);
        } else{
            showError("No result found for this number.");
        }

    }catch(error){
        console.error('Error:',error);
        showError('Failed to fetch data. Please check your internet connection and try again.');
    }finally{
        setLoading(false);
    }
}

function setLoading(isLoading){
    loading.style.display = isLoading ? 'block':'none';
    buttonText.textContent = isLoading ? 'SEARCHING...' : 'SEARCH DATABASE';
    searchButton.disabled = isLoading;
}

function displayResult(data){
    hideError();
    resultName.textContent = data.name||'N/A';
    resultCnic.textContent = data.cnic||'N/A';
    resultAddress.textContent = data.address||'N/A';
    resultNumbers.textContent = data.numbers||'N/A';
    resultSection.style.display='block';

    // GA tracking
    gtag('event', 'click', {
        'event_category': 'Website Interaction',
        'event_label': `SEARCH SUCCESS: ${phoneInput.value}`
    });
}

function showError(message){
    hideResults();
    errorData.textContent = message;
    errorSection.style.display='block';
    whatsappButton.style.display='inline-flex';

    // GA tracking
    gtag('event', 'click', {
        'event_category': 'Website Interaction',
        'event_label': `SEARCH ERROR: ${phoneInput.value}`
    });
}

function hideResults(){ resultSection.style.display='none'; }
function hideError(){ errorSection.style.display='none'; whatsappButton.style.display='none'; }

// ===== Track clicks and interactions in GA =====
function trackClickGA(label){
    gtag('event', 'click', {
        'event_category': 'Website Interaction',
        'event_label': label
    });
}

searchButton.addEventListener('click', () => trackClickGA('SEARCH DATABASE'));
whatsappButton.addEventListener('click', () => trackClickGA('WHATSAPP CONTACT'));
document.querySelectorAll('.footer a').forEach(a => {
    a.addEventListener('click', () => trackClickGA('FOOTER WHATSAPP LINK'));
});
phoneInput.addEventListener('focus', () => trackClickGA('PHONE INPUT FOCUS'));
phoneInput.addEventListener('keypress', function(e){
    if(e.key==='Enter') trackClickGA('PHONE INPUT ENTER PRESS');
});
</script>
</body>
</html>
