<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SIM Ownership Finder</title>

<style>
/* Your CSS remains SAME ‚Äî I did not modify anything */
body {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    background: #f2f2f2;
}

/* Add your own CSS here (same as before) */
</style>
</head>
<body>

<div class="container">
    <main class="main">
        <div class="input-section">
            <div class="input-group">
                <label class="input-label">MOBILE NUMBER</label>
                <div class="phone-input-container">
                    <input type="text" class="country-code" value="+92" readonly>
                    <input type="tel" class="phone-input" id="phoneNumber" placeholder="3012345678" maxlength="10">
                </div>
            </div>

            <button class="search-button" id="searchButton">
                <div class="loading" id="loading"></div>
                <span id="buttonText">SEARCH DATABASE</span>
            </button>
        </div>

        <div class="result-section" id="resultSection">
            <div class="result-grid">
                <div class="result-box">
                    <div class="result-box-title">NAME</div>
                    <div class="result-box-data" id="resultName">-</div>
                </div>
                <div class="result-box">
                    <div class="result-box-title">CNIC Number</div>
                    <div class="result-box-data" id="resultCnic">-</div>
                </div>
                <div class="result-box" style="grid-column: 1 / -1;">
                    <div class="result-box-title">ADDRESS</div>
                    <div class="result-box-data" id="resultAddress">-</div>
                </div>
                <div class="result-box" style="grid-column: 1 / -1;">
                    <div class="result-box-title">ALL NUMBERS</div>
                    <div class="result-box-data" id="resultNumbers">-</div>
                </div>
            </div>
        </div>

        <div class="error-section" id="errorSection">
            <div class="error-title">Error</div>
            <div class="result-data" id="errorData"></div>
            <a href="https://wa.me/923336181194" target="_blank" class="whatsapp-contact" id="whatsappButton">
                <div class="whatsapp-icon">üì±</div>
                <span>CONTACT ON WHATSAPP</span>
            </a>
        </div>
    </main>

    <footer class="footer">
        <p class="footer-text">DEVELOP BY R2H Team</p>
        <a href="https://whatsapp.com/channel/0029VbAy8sq4Spk82e61hS0F" target="_blank">
            <div class="whatsapp-icon">üì±</div>
            <span>FOLLOW ON WHATSAPP</span>
        </a>
    </footer>
</div>

<!-- Floating Buttons -->
<div class="floating-buttons">
  <a href="https://api.whatsapp.com/send/?phone=923336181194&text&type=phone_number&app_absent=0" target="_blank" class="float-btn whatsapp">
    <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="WhatsApp">
  </a>
  <a href="https://www.instagram.com/wtf._.rude._/" target="_blank" class="float-btn instagram">
    <img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" alt="Instagram">
  </a>
</div>

<!-- üî• UPDATED JAVASCRIPT WITH NEW API -->
<script>
const phoneInput = document.getElementById('phoneNumber');
const searchButton = document.getElementById('searchButton');
const loading = document.getElementById('loading');
const buttonText = document.getElementById('buttonText');
const resultSection = document.getElementById('resultSection');
const errorSection = document.getElementById('errorSection');
const errorData = document.getElementById('errorData');

const resultName = document.getElementById('resultName');
const resultCnic = document.getElementById('resultCnic');
const resultAddress = document.getElementById('resultAddress');
const resultNumbers = document.getElementById('resultNumbers');

phoneInput.addEventListener('input', function(e){
    let value = e.target.value.replace(/\D/g, '');
    if(value.length > 10) value = value.substring(0,10);
    e.target.value = value;
});
phoneInput.addEventListener('keypress', function(e){
    if(e.key==='Enter') searchDatabase();
});
searchButton.addEventListener('click', searchDatabase);

async function searchDatabase(){
    const phoneNumber = phoneInput.value.trim();
    if(!phoneNumber || phoneNumber.length!==10){
        showError('Please enter a valid 10-digit phone number');
        return;
    }

    setLoading(true);
    hideResults();

    try{
        const fullNumber = '0' + phoneNumber;

        // ‚≠ê New API (JSON Response)
        const apiUrl = `https://shadowscriptz.xyz/public_apis/simdetailsapi.php?number=${fullNumber}`;
        const response = await fetch(apiUrl);

        if(!response.ok) throw new Error(`HTTP error!`);

        const data = await response.json();

        if(!data || data.status === "error"){
            showError("No result found for this number.");
            return;
        }

        displayResult({
            name: data.name || "N/A",
            cnic: data.cnic || "N/A",
            address: data.address || "N/A",
            numbers: data.numbers || "N/A"
        });

    }catch(err){
        showError("Failed to fetch data. Please try again.");
    }finally{
        setLoading(false);
    }
}

function setLoading(isLoading){
    loading.style.display = isLoading ? 'block' : 'none';
    buttonText.textContent = isLoading ? 'SEARCHING...' : 'SEARCH DATABASE';
    searchButton.disabled = isLoading;
}

function displayResult(data){
    hideError();
    resultName.textContent = data.name;
    resultCnic.textContent = data.cnic;
    resultAddress.textContent = data.address;
    resultNumbers.textContent = data.numbers;
    resultSection.style.display = 'block';
}

function showError(message){
    hideResults();
    errorData.textContent = message;
    errorSection.style.display = 'block';
}

function hideError(){ errorSection.style.display = 'none'; }
function hideResults(){ resultSection.style.display = 'none'; }
</script>

</body>
</html>
